package com.shpach.filescopy;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FilenameFilter;
import java.io.IOException;

public class IOUtils {
	public static class InputParamNotDirExeption extends Exception {
		@Override
		public String getMessage() {
			return "Input param is not valid";
		}
	}

	public static void copyFiles(File dirFrom, File dirTo, FilenameFilter fnf)
			throws FileNotFoundException, IOException, InputParamNotDirExeption {
		if (dirFrom.exists() && dirTo.exists()) {
			if (dirFrom.isDirectory() && dirTo.isDirectory()) {

				File[] fileList = dirFrom.listFiles(fnf);

				for (File mfile : fileList) {
					try (FileInputStream fio = new FileInputStream(mfile);
							FileOutputStream fos = new FileOutputStream(dirTo.getAbsolutePath() + mfile.getName())) {
						byte[] buff = new byte[4 * 1024];
						int readBytes = 0;
						for (; (readBytes = fio.read(buff)) > 0;) {
							fos.write(buff, 0, readBytes);
						}

					}
				}

			} else {
				throw new IOUtils.InputParamNotDirExeption();
			}
		} else {
			throw new IOUtils.InputParamNotDirExeption();
		}
	}

}
